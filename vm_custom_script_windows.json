{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json# ",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "cloudEmail": {
			"type": "string"
		},
		"cloudPassword": {
			"type": "secureString"
		},
		"connectorUUIDList": {
			"type": "string"
		}               
    },
    "variables": {"apiVersion" : "2015-05-01-preview"},
    "resources": [
    {
		"type": "extensions",
		"name": "CustomScriptExtension",
		"apiVersion": "[variables('apiVersion')]",
		"location": "[resourceGroup().location]",
		"properties": {
			"publisher": "Microsoft.Compute",
			"type": "CustomScriptExtension",
			"typeHandlerVersion": "1.8",
			"autoUpgradeMinorVersion": true,
			"settings": {
				"fileUris" : ["https://github.com/gsvivek/azurescripts/raw/master/InfaCloudExtProvision.ps1"],
				"commandToExecute" : "[concat('powershell.exe -ExecutionPolicy Unrestricted -File InfaCloudExtProvision.ps1 ', parameters('cloudEmail'),' ',parameters('cloudPassword'),' ',parameters('connectorUUIDList'))]"
			}
		}
    }
    ]
}
