{
	"handler" : "Microsoft.Compute.MultiVm",
	"version" : "0.0.1-preview",
	"parameters" : {
		"basics" : [{
				"name" : "firstName",
				"type" : "Microsoft.Common.TextBox",
				"label" : "First Name",
				"constraints" : {
					"required" : true
				}
			}, {
				"name" : "lastName",
				"type" : "Microsoft.Common.TextBox",
				"label" : "Last Name",
				"constraints" : {
					"required" : true
				}
			}, {
				"name" : "cloudEmail",
				"type" : "Microsoft.Common.TextBox",
				"label" : "Email Address",
				"toolTip" : "Primary email address.",
				"constraints" : {
					"required" : true
				}
			}, {
				"name" : "phone",
				"type" : "Microsoft.Common.TextBox",
				"label" : "Phone Number",
				"constraints" : {
					"required" : true
				}
			}, {
				"name" : "title",
				"type" : "Microsoft.Common.TextBox",
				"label" : "Title",
				"constraints" : {
					"required" : true
				}
			}, {
				"name" : "orgName",
				"type" : "Microsoft.Common.TextBox",
				"label" : "Company Name",
				"constraints" : {
					"required" : true
				}
			}
		],
		"steps" : [{
				"name" : "vmDetails",
				"label" : "VM Details",
				"subLabel" : {
					"preValidation" : "Configure the VM details",
					"postValidation" : "Done"
				},
				"bladeTitle" : "VM Details",
				"elements" : [{
						"name" : "os",
						"type" : "Microsoft.Common.DropDown",
						"label" : "Select the OS for the VM",
						"defaultValue" : "Windows Server 2012 R2 Datacenter",
						"toolTip" : "OS platform of the VM.",
						"constraints" : {
							"allowedValues" : [{
									"label" : "Windows Server 2012 R2 Datacenter",
									"value" : "windows"
								}, {
									"label" : "Ubuntu Linux 16.04",
									"value" : "linux"
								}
							]
						}
					}, {
						"name" : "adminUsername",
						"type" : "Microsoft.Compute.UserNameTextBox",
						"label" : "VM Username",
						"toolTip" : "Admin username for the virtual machines.",
						"osPlatform" : "Windows"
					}, {
						"name" : "adminPasswordWin",
						"type" : "Microsoft.Compute.CredentialsCombo",
						"label" : {
							"password" : "Password",
							"confirmPassword" : "Confirm password"
						},
						"toolTip" : {
							"password" : ""
						},
						"constraints" : {
							"required" : true
						},
						"options" : {
							"hideConfirmation" : false
						},
						"osPlatform" : "Windows",
						"visible" : "[equals(steps('vmDetails').os, 'windows')]"
					}, {
						"name" : "adminPasswordLin",
						"type" : "Microsoft.Compute.CredentialsCombo",
						"label" : {
							"authenticationType" : "Authentication type",
							"password" : "Password",
							"confirmPassword" : "Confirm password",
							"sshPublicKey" : "SSH public key"
						},
						"toolTip" : {
							"authenticationType" : "",
							"password" : "",
							"sshPublicKey" : ""
						},
						"constraints" : {
							"required" : true
						},
						"options" : {
							"hideConfirmation" : false,
							"hidePassword" : false
						},
						"osPlatform" : "linux",
						"visible" : "[equals(steps('vmDetails').os, 'linux')]"
					}, {
						"name" : "windowsVmSize",
						"type" : "Microsoft.Compute.SizeSelector",
						"label" : "Virtual machine size",
						"toolTip" : "The size of the virtual machine.",
						"recommendedSizes" : ["Standard_D12_v2"],
						"constraints" : {
							"allowedSizes" : ["Standard_D12", "Standard_D12_v2"],
							"excludedSizes" : []
						},
						"osPlatform" : "Windows",
						"count" : 1,
						"visible" : "[equals(steps('vmDetails').os, 'windows')]"
					}, {
						"name" : "linuxVmSize",
						"type" : "Microsoft.Compute.SizeSelector",
						"label" : "Virtual machine size",
						"toolTip" : "The size of the virtual machine.",
						"recommendedSizes" : ["Standard_D12_v2"],
						"constraints" : {
							"allowedSizes" : ["Standard_D12", "Standard_D12_v2"],
							"excludedSizes" : []
						},
						"osPlatform" : "Linux",
						"count" : 1,
						"visible" : "[equals(steps('vmDetails').os, 'linux')]"
					}
				]
			}, {
				"name" : "cloudRegDetails",
				"type" : "Microsoft.Common.Selector",
				"label" : "Informatica Cloud Registration",
				"subLabel" : {
					"preValidation" : "Fill details for an Informatica Cloud account",
					"postValidation" : "Done"
				},
				"toolTip" : "Fill details for an Informatica Cloud Account",
				"bladeTitle" : "Informatica Cloud Registration",
				"bladeSubtitle" : "Create an account on Informatica Cloud",
				"elements" : [{
						"name" : "cloudUsername",
						"type" : "Microsoft.Common.OptionsGroup",
						"label" : "Informatica Cloud username",
						"defaultValue" : "[concat(basics('cloudEmail'), '.azure')]",
						"toolTip" : "If your email is name@informatica.com, your Informatica Cloud username would be <b>name@informatica.com.azure</b>.",
						"constraints" : {
							"allowedValues" : [{
									"label" : "[concat(basics('cloudEmail'), '.azure')]",
									"value" : "[concat(basics('cloudEmail'), '.azure')]"
								}
							]
						},
						"visible" : true
					}, {
						"name" : "cloudPassword",
						"type" : "Microsoft.Common.PasswordBox",
						"label" : {
							"password" : "Informatica Cloud Password",
							"confirmPassword" : "Confirm password"
						},
						"toolTip" : {
							"password" : "Password for your Informatica Cloud account. Password must be 6-15 characters long and can contain the special characters @*#"
						},
						"constraints" : {
							"required" : true,
							"regex" : "^([a-zA-Z0-9@*#]{6,15})$",
							"validationMessage" : "Password must be 6-15 characters long and can contain the special characters @*#"
						},
						"options" : {
							"hideConfirmation" : false
						},
						"visible" : true
					}, {
						"name" : "cloudConnector1",
						"type" : "Microsoft.Common.DropDown",
						"label" : "Connector #1",
						"defaultValue" : "Microsoft Azure SQL Data Warehouse",
						"toolTip" : "Select the connector for your Microsoft Azure service.",
						"constraints" : {
							"required" : true,
							"allowedValues" : [{
									"label" : "Microsoft Azure Blob Storage",
									"value" : "0db52dc0-49c5-11e4-916c-0800200c9a66"
								}, {
									"label" : "Microsoft Azure Data Lake Store",
									"value" : "27a9f87a-7ae1-4b96-b53c-c3ad7f61c3fa"
								}, {
									"label" : "Microsoft Azure DocumentDB",
									"value" : "c2587bb0-992f-4d36-ab38-0547f76490b4"
								}, {
									"label" : "Microsoft Azure SQL Data Warehouse",
									"value" : "592f0ecc-9312-4936-b9db-184dcd0a48c8"
								}
							]
						}
					}, {
						"name" : "cloudConnector2",
						"type" : "Microsoft.Common.DropDown",
						"label" : "Connector #2",
						"defaultValue" : "Avature",
						"toolTip" : "Select the connector for your other data source.",
						"constraints" : {
							"required" : true,
							"allowedValues" : [{
									"label" : "Amazon DynamoDB",
									"value" : "45d431c2-9474-40de-bcf1-409dc56faa3f"
								}, {
									"label" : "Amazon RedShift",
									"value" : "0b0ad503-1c2c-4514-95ac-85a5adb71b3b"
								}, {
									"label" : "Amazon S3",
									"value" : "554a67aa-7f07-42f8-bfad-c927cf4d7f28"
								}, {
									"label" : "Box",
									"value" : "ef75055a-3197-4e79-ba70-6dfd03f7c1ac"
								}, {
									"label" : "JDBC",
									"value" : "33ec8fc7-dc6d-4d2e-9f6f-a950669a62d1"
								}, {
									"label" : "Microsoft Azure Blob Storage",
									"value" : "0db52dc0-49c5-11e4-916c-0800200c9a66"
								}, {
									"label" : "Microsoft Azure Data Lake Store",
									"value" : "27a9f87a-7ae1-4b96-b53c-c3ad7f61c3fa"
								}, {
									"label" : "Microsoft Azure DocumentDB",
									"value" : "c2587bb0-992f-4d36-ab38-0547f76490b4"
								}, {
									"label" : "Microsoft Azure SQL Data Warehouse",
									"value" : "592f0ecc-9312-4936-b9db-184dcd0a48c8"
								}, {
									"label" : "Microsoft Dyanamics CRM",
									"value" : ""
								}, {
									"label" : "Microsoft Dynamics AX 2012",
									"value" : "4f3682df-ef20-494b-a2c7-9abd1cb912c8"
								}, {
									"label" : "Microsoft Dynamics GP 2xxx",
									"value" : "47ca4b25-e21d-4d86-a8c6-7f59e495bc44"
								}, {
									"label" : "Microsoft Dynamics NAV 2xxx",
									"value" : "d78660a5-ddeb-4441-9f3b-7979243c865b"
								}, {
									"label" : "MySQL",
									"value" : ""
								}, {
									"label" : "NetSuite",
									"value" : "e977b246-8cd4-4ed9-94ab-e534353e87ff"
								}, {
									"label" : "ODBC",
									"value" : ""
								}, {
									"label" : "Oracle DB (12c)",
									"value" : ""
								}, {
									"label" : "Salesforce Analytics",
									"value" : "d4e564a0-4042-11e4-916c-0800200c9a66"
								}, {
									"label" : "Salesforce CRM",
									"value" : ""
								}, {
									"label" : "Salesforce Marketing Cloud",
									"value" : "4848f1de-b6e0-4c2e-9a6a-186332db6591"
								}, {
									"label" : "SAP BW",
									"value" : "ff5896e2-b56f-482c-ae1f-4ac483bbd6ea"
								}, {
									"label" : "SAP SuccessFactors (Odata)",
									"value" : "9ff13103-688b-42db-9d8a-081538918eb0"
								}, {
									"label" : "SAP Table Connector",
									"value" : "71247120-1cdd-11e2-892e-0800200c9a66"
								}, {
									"label" : "Sugar CRM",
									"value" : "860cf54a-895e-4e47-a3bb-6c35f098ee08"
								}, {
									"label" : "Tableau",
									"value" : "cb852a22-876d-11e4-b116-123b93f75cba"
								}, {
									"label" : "Workday",
									"value" : "78ea38f4-06e8-44d6-b4ce-ff5b651f06e9"
								}, {
									"label" : "Marketo",
									"value" : "0ea72f00-949c-11e4-b4a9-0800200c9a67"
								}
							]
						}
					}
				]
			}
		],
		"outputs" : {
			"location" : "[location()]",
			"firstName" : "[basics('firstName')]",
			"lastName" : "[basics('lastName')]",
			"cloudEmail" : "[basics('cloudEmail')]",
			"phone" : "[basics('phone')]",
			"title" : "[basics('title')]",
			"orgName" : "[basics('orgName')]",
			"os" : "[steps('vmDetails').os]",
			"adminUsername" : "[steps('vmDetails').adminUsername]",
			"authType" : "[coalesce(steps('vmDetails').adminPasswordWin.authenticationType, steps('vmDetails').adminPasswordLin.authenticationType)]",
			"adminPassword" : "[coalesce(steps('vmDetails').adminPasswordWin.password, steps('vmDetails').adminPasswordLin.password)]",
			"sshPublicKey" : "[steps('vmDetails').adminPasswordLin.sshPublicKey]",
			"vmSize" : "[coalesce(steps('vmDetails').windowsVmSize, steps('vmDetails').linuxVmSize)]",
			"cloudUsername" : "[steps('cloudRegDetails').cloudUsername]",
			"cloudPassword" : "[steps('cloudRegDetails').cloudPassword]",
			"cloudConnector1" : "[steps('cloudRegDetails').cloudConnector1]",
			"cloudConnector2" : "[steps('cloudRegDetails').cloudConnector2]"
		}
	}
}
